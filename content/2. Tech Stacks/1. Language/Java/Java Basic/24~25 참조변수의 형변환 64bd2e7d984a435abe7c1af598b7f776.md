# 24~25. 참조변수의 형변환

## 참조변수의 형변환

---

- 참조변수의 형변환 시 변하는 것
    - 달라지는 것 : 객체의 타입
    - 그대로인 것 : 객체 자체, 주소값
- 참조변수의 형변환을 하는 이유
    - 사용할 수 있는 멤버의 갯수를 조절하기 위해서
- 조상 자손 관계의 참조변수는 서로 형변환 가능

```java
class Car { }
class FireEngine extends Car { }
class Ambulance extends Car { }

FireEngine f = new FireEngine();

Car c = (Car)f;                // OK. 조상인 Car타입으로 형변환 (업캐스팅)
FireEngine f2 = FireEngine(c); // OK. 자손인 FireEngine타입으로 형변환 (다운캐스팅)
Ambulance a = (Ambulance)f;    // 에러. 상속관계가 아닌 클래스 간의 형변환 불가
```

- 형변환 시 실제 인스턴스가 무엇인지가 중요

```java
public class Ex7_7 {
	public static void main(String[] args) {
		Car car = null;
		FireEngine fe = new FireEngine();

		FireEngine fe2 = (FireEngine)car; // 다운캐스팅
		Car car2 = (Car)fe2;              // 업캐스팅
		car2.drive();                     // NullPointerException 발생.
                                      // 왜? 기존 인스턴스인 car이 null이기 때문에
		Car c = new Car();
		FireEngine f = (FireEngine)c; // 형변환 실행 에러 ClassCastException 발생.
		f.water();                    // 컴파일은 OK.
                                  // 실제 객체는 Car인스턴스이기 때문에 f.water() 사용불가
	}
}
```