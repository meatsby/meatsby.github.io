# 18. 연결된 예외

## 연결된 예외

---

- 한 예외가 다른 예외를 발생시킬 수 있음
- 예외A가 예외B를 발생시키면, A는 B의 원인 예외 (cause exception)

```java
Throwable initCause(Throwable cause) 지정한 예외를 원인 예외로 등록
Throwable getCause()                 원인 예외를 반환
```

```java
void install() throws InstallException {
	try {
		startInstall(); // SpaceException 발생
		copyFiles();
	} catch (SpaceException e) {
		InstallException ie = new InstallException("설치중 예외 발생"); // 예외 생성
		ie.initCause(e); // InstallException의 원인 예외를 SpaceException으로 지정
		throw ie;        // InstallException을 발생시킴
	} catch (MemoryException me) {
	}
}
```

### 이유

1. 여러 예외를 하나로 묶어서 다루기 위해
    
    ```java
    try {
    	install(); // install 메서드 안에서 Space, MemoryException을 처리
    } catch(InstallException e) { // InstallException의 원인 예외를
    	e.printStackTrace();        // Space, MemoryException으로 지정
    }
    ```
    
2. checked 예외를 unchecked 예외로 변경하려 할 때
    
    ```java
    static void startInstall() throws SpaceException {
    	if (!enoughSpace()) {
    		throw new SpaceException("공간 부족");
    	}
    
    	// RuntimeException의 원인 예외를 MemoryException으로 지정
    	// 필수 예외처리를 선택 예외처리로 변경
    	if (!enoughMemory()) {
    		throw new RuntimeException(new MemoryException("메모리 부족"));
    	}
    }
    ```