# 26~34. 스트림의 중간 연산

## 스트림의 중간 연산

---

- 스트림 자르기 - skip(), limit()

```java
IntStream intStream = IntStream.rangeClosed(1, 10);    // 12345678910
intStream.skip(3).limit(5).forEach(System.out::print); // 45678
```

- 스트림 요소 걸러내기 - filter(), distinct()

```java
Int intStream = IntStream.of(1,2,2,3,3,3,4,5,5,6);
intStream.distinct().forEach(System.out::print); // 123456

Int intStream = IntStream.rangeClosed(1, 10);               // 12345678910
intStream.filter(i -> i%2 == 0).forEach(System.out::print); // 246810

intStream.filter(i -> i%2 != 0 && i%3 != 0).forEach(System.out::print);
intStream.filter(i -> i%2 != 0).filter(i -> i%3 != 0).forEach(System.out::print);
```

- 스트림 정렬하기 - sorted()

```java
Stream<T> sorted()                // 스트림 요소의 기본 정렬(Comparable)로 정렬
Stream<T> sorted(Comparator<? super T> comparator) // 지정된 Comparator로 정렬
```

- 스트림의 요소 반환하기 - map()

```java
// e.g. 파일 스트림에서 파일 확장자(대문자)를 중복없이 뽑아내기
fileStream.map(File::getName)                // Stream<File> -> Stream<String>
	.filter(s -> s.indexOf('.') != -1)         // 확장자가 없는 것은 제외
	.map(s -> s.substring(s.indexOf('.') + 1)) // Stream<String> -> Stream<String>
	.map(String::toUpperCase)                  // Stream<String> -> Stream<String>
	.distinct()                                // 중복 제거
	.forEach(System.out::print);               // JAVABAKTXT
```

- 스트림의 요소를 소비하지 않고 엿보기 - peek()

```java
fileStream.map(File::getName)                // Stream<File> -> Stream<String>
	.filter(s -> s.indexOf('.') != -1)         // 확장자가 없는 것은 제외
	.peek(s -> System.out.printf("filename=%s%n", s)) // 파일명 출력
	.map(s -> s.substring(s.indexOf('.') + 1)) // Stream<String> -> Stream<String>
	.peek(s -> System.out.printf("extension=%s%n", s)) // 확장자 출력
	.forEach(System.out::print);               // JAVABAKTXT
```

- 스트림의 스트림을 스트림으로 변환 - flatMap()

```java
Stream<String[]> strArrStream = Stream.of(
	new String[]{"abc", "def", "jkl"},
	new String[]{"ABC", "GHI", "JKL"}
);

// 스트림의 스트림
Stream<Stream<String>> strStreamStream = strArrStream.map(Arrays::stream);

// 스트림의 스트림 -> 스트링 스트림
Stream<String> strStream = strArrStream.flatMap(Arrays::stream);
```